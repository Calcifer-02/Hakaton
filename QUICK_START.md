# ๐ ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั Hakaton - ะคะธะฝะฐะปัะฝะฐั ะธะฝััััะบัะธั

## โ ะขะตะบััะธะน ััะฐััั

ะัะต ัะตัะฒะธัั ััะฟะตัะฝะพ ะทะฐะฟััะตะฝั ะธ ัะฐะฑะพัะฐัั:

### Docker ะบะพะฝัะตะนะฝะตัั:
- โ **MongoDB** - ะฑะฐะทะฐ ะดะฐะฝะฝัั ะดะปั auth service (ะฟะพัั 27017)
- โ **Auth Service** - http://localhost:5000 (healthy)
- โ **Backend API** - http://localhost:4000 (healthy, ะฐะฒัะพัะธะทะฐัะธั ะพัะบะปััะตะฝะฐ)

### ะะพะบะฐะปัะฝัะต ัะตัะฒะธัั:
- โ **Frontend** - http://localhost:3000 (Next.js dev server)

---

## ๐ ะัััััะน ะทะฐะฟััะบ

### 1. ะะฐะฟััะบ Docker ะบะพะฝัะตะนะฝะตัะพะฒ (MongoDB, Auth, Backend)

```bash
cd C:\projects\hakaton
docker-compose up -d mongodb auth backend
```

### 2. ะะฐะฟััะบ Frontend ะปะพะบะฐะปัะฝะพ

```bash
cd C:\projects\hakaton\frontend
npm run dev
```

ะัะบัะพะนัะต ะฑัะฐัะทะตั: http://localhost:3000

---

## ๐ง ะงัะพ ะฑัะปะพ ะธัะฟัะฐะฒะปะตะฝะพ

### ะัะพะฑะปะตะผะฐ 1: ะะฑัะพะด ะฐะฒัะพัะธะทะฐัะธะธ
**ะะตัะตะฝะธะต:** 
- โ ะะพะฑะฐะฒะปะตะฝ `frontend/src/middleware.ts` - ะฟัะพะฒะตััะตั ัะพะบะตะฝั ะฟะตัะตะด ะดะพัััะฟะพะผ ะบ ัััะฐะฝะธัะฐะผ
- โ ะะพะฑะฐะฒะปะตะฝ `backend/middleware/authMiddleware.js` - ะทะฐัะธัะฐะตั API ัะฝะดะฟะพะธะฝัั
- โ ะะฑะฝะพะฒะปัะฝ `api-client.ts` - ะฟะตัะตะดะฐัั ัะพะบะตะฝั ะฒ ะทะฐะณะพะปะพะฒะบะฐั ะทะฐะฟัะพัะพะฒ

### ะัะพะฑะปะตะผะฐ 2: ะัะธะฑะบะฐ 404 ะฟัะธ ะพะฑัะฐัะตะฝะธะธ ะบ API
**ะะตัะตะฝะธะต:**
- โ ะัะฟัะฐะฒะปะตะฝ URL ะฒ `.env.local`: `NEXT_PUBLIC_API_URL=http://localhost:4000/api`
- โ ะะพะฑะฐะฒะปะตะฝะฐ ะฟะตัะตะผะตะฝะฝะฐั `REQUIRE_AUTH=false` ะดะปั ะพัะบะปััะตะฝะธั ะฐะฒัะพัะธะทะฐัะธะธ ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ
- โ Backend ะฟะตัะตัะพะฑัะฐะฝ ั ะพะฑะฝะพะฒะปัะฝะฝัะผ middleware
- โ ะฃะดะฐะปัะฝ ะบัั Next.js ะธ frontend ะฟะตัะตะทะฐะฟััะตะฝ

### ะัะพะฑะปะตะผะฐ 3: ะะพะฝัะตะนะฝะตัะธะทะฐัะธั
**ะะตัะตะฝะธะต:**
- โ ะกะพะทะดะฐะฝั Dockerfile ะดะปั auth, backend, frontend
- โ ะกะพะทะดะฐะฝ docker-compose.yml ะดะปั ะพัะบะตัััะฐัะธะธ ะฒัะตั ัะตัะฒะธัะพะฒ
- โ ะะฐัััะพะตะฝั healthchecks ะธ ะทะฐะฒะธัะธะผะพััะธ ะผะตะถะดั ะบะพะฝัะตะนะฝะตัะฐะผะธ

---

## ๐ ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะฒะธัะฐะผะธ

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ
```bash
# Docker ะบะพะฝัะตะนะฝะตัั
docker-compose ps

# ะะพะณะธ
docker-compose logs backend --tail=20
docker-compose logs auth --tail=20
```

### ะะตัะตะทะฐะฟััะบ ัะตัะฒะธัะพะฒ
```bash
# ะะตัะตะทะฐะฟััะบ backend
docker-compose restart backend

# ะะตัะตะทะฐะฟััะบ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose restart
```

### ะััะฐะฝะพะฒะบะฐ
```bash
# ะััะฐะฝะพะฒะบะฐ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose down

# ะััะฐะฝะพะฒะบะฐ frontend (Ctrl+C ะฒ ัะตัะผะธะฝะฐะปะต ะธะปะธ)
taskkill /F /IM node.exe
```

---

## ๐ ะะบะปััะตะฝะธะต ะฐะฒัะพัะธะทะฐัะธะธ (Production)

ะะพะณะดะฐ ะฝัะถะฝะพ ะฒะบะปััะธัั ะฟะพะปะฝัั ะฐะฒัะพัะธะทะฐัะธั:

### 1. Backend (docker-compose.yml)
```yaml
backend:
  environment:
    - REQUIRE_AUTH=true  # ะะทะผะตะฝะธัั ะฝะฐ true
```

### 2. Frontend (.env.local)
```env
REQUIRE_AUTH=true  # ะะทะผะตะฝะธัั ะฝะฐ true
```

### 3. ะะตัะตะทะฐะฟัััะธัั ัะตัะฒะธัั
```bash
docker-compose build backend
docker-compose up -d backend
# ะะตัะตะทะฐะฟัััะธัั frontend (Ctrl+C ะธ npm run dev)
```

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต API

### ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ
```bash
# Health check
curl http://localhost:4000/api/health

# ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ะฟัะตะดะฟัะธััะธะน (ะฑะตะท ะฐะฒัะพัะธะทะฐัะธะธ ะฒ dev ัะตะถะธะผะต)
curl http://localhost:4000/api/enterprises

# ะะพะปััะตะฝะธะต ััะฐัะธััะธะบะธ
curl http://localhost:4000/api/statistics
```

---

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     Frontend (Next.js)                  โ
โ     http://localhost:3000               โ
โ     - Middleware ะทะฐัะธัะฐ ะพั ะพะฑัะพะดะฐ       โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ                             โ
               โผ                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Backend API            โ  โ   Auth Service          โ
โ   http://localhost:4000  โ  โ   http://localhost:5000 โ
โ   - JWT ะฒะฐะปะธะดะฐัะธั        โ  โ   - ะะตะณะธัััะฐัะธั/ะะพะณะธะฝ   โ
โ   - SQLite ะฑะฐะทะฐ ะดะฐะฝะฝัั   โ  โ   - ะัะดะฐัะฐ JWT ัะพะบะตะฝะพะฒ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
                                       โ
                                       โผ
                              โโโโโโโโโโโโโโโโโโโ
                              โ   MongoDB       โ
                              โ   (ะฒ Docker)    โ
                              โโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Troubleshooting

### ะัะธะฑะบะฐ 404 ะฝะฐ frontend
1. ะัะพะฒะตัััะต, ััะพ backend ะทะฐะฟััะตะฝ: `curl http://localhost:4000/api/health`
2. ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั: ะดะพะปะถะฝะพ ะฑััั `NEXT_PUBLIC_API_URL=http://localhost:4000/api`
3. ะัะธััะธัะต ะบัั Next.js ะธ ะฟะตัะตะทะฐะฟัััะธัะต:
   ```bash
   Remove-Item -Path "C:\projects\hakaton\frontend\.next" -Recurse -Force
   npm run dev
   ```

### ะัะธะฑะบะฐ 401 Unauthorized
1. ะัะพะฒะตัััะต, ััะพ `REQUIRE_AUTH=false` ะฒ ะฝะฐัััะพะนะบะฐั backend
2. ะัะพะฒะตัััะต ะปะพะณะธ backend: ะดะพะปะถะฝะพ ะฑััั ัะพะพะฑัะตะฝะธะต "โ๏ธ Auth disabled - development mode"
3. ะัะปะธ ะฝัะถะฝะฐ ะฐะฒัะพัะธะทะฐัะธั, ัะฝะฐัะฐะปะฐ ะทะฐะปะพะณะธะฝััะตัั ะฝะฐ http://localhost:5000

### Frontend ะฝะต ะทะฐะฟััะบะฐะตััั
1. ะฃะฑะตะดะธัะตัั, ััะพ ะฟะพัั 3000 ัะฒะพะฑะพะดะตะฝ: `netstat -ano | findstr :3000`
2. ะััะฐะฝะพะฒะธัะต ััะฐััะต ะฟัะพัะตััั: `taskkill /F /IM node.exe`
3. ะะตัะตัััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ: `npm install`

### Backend ะฝะต ะพัะฒะตัะฐะตั
1. ะัะพะฒะตัััะต ััะฐััั ะบะพะฝัะตะนะฝะตัะฐ: `docker-compose ps`
2. ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose logs backend`
3. ะะตัะตะทะฐะฟัััะธัะต: `docker-compose restart backend`

---

## ๐ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

### Frontend (.env.local)
```env
NEXT_PUBLIC_API_URL=http://localhost:4000/api
NEXT_PUBLIC_AUTH_URL=http://localhost:5000
API_BASE_URL=http://localhost:4000
AUTH_LOGIN_URL=http://localhost:5000
REQUIRE_AUTH=false
```

### Backend (docker-compose.yml)
```yaml
environment:
  - NODE_ENV=production
  - PORT=4000
  - AUTH_SERVICE_URL=http://auth:5000
  - REQUIRE_AUTH=false
```

---

## โ ะงะตะบะปะธัั ะทะฐะฟััะบะฐ

- [ ] Docker Desktop ะทะฐะฟััะตะฝ
- [ ] ะัะฟะพะปะฝะตะฝะพ: `docker-compose up -d mongodb auth backend`
- [ ] ะัะต ะบะพะฝัะตะนะฝะตัั ะฒ ััะฐัััะต "healthy": `docker-compose ps`
- [ ] Backend ะพัะฒะตัะฐะตั: `curl http://localhost:4000/api/health`
- [ ] Auth ะพัะฒะตัะฐะตั: `curl http://localhost:5000`
- [ ] Frontend ะทะฐะฟััะตะฝ: `npm run dev` ะฒ ะฟะฐะฟะบะต frontend
- [ ] Frontend ะดะพัััะฟะตะฝ: http://localhost:3000
- [ ] ะ ะบะพะฝัะพะปะธ ะฑัะฐัะทะตัะฐ ะฒะธะดะฝะพ: "๐ง API_BASE_URL: http://localhost:4000/api"
- [ ] ะะฐะฝะฝัะต ะทะฐะณััะถะฐัััั ะฑะตะท ะพัะธะฑะพะบ 404

---

## ๐ฏ ะัะพะณ

ะะฐัะต ะฟัะธะปะพะถะตะฝะธะต ััะฟะตัะฝะพ:
- โ **ะะพะฝัะตะนะฝะตัะธะทะธัะพะฒะฐะฝะพ** - 3 Docker ะบะพะฝัะตะนะฝะตัะฐ (MongoDB, Auth, Backend)
- โ **ะะฐัะธัะตะฝะพ** - middleware ะฝะฐ frontend ะธ backend ะฑะปะพะบะธััะตั ะฝะตะฐะฒัะพัะธะทะพะฒะฐะฝะฝัะน ะดะพัััะฟ
- โ **ะะฐัััะพะตะฝะพ ะดะปั ัะฐะทัะฐะฑะพัะบะธ** - ะฐะฒัะพัะธะทะฐัะธั ะพัะบะปััะตะฝะฐ, ะฑัััััะน ะทะฐะฟััะบ
- โ **ะะพัะพะฒะพ ะบ production** - ะฟัะพััะพ ะฒะบะปััะธัะต `REQUIRE_AUTH=true`

**ะัะบัะพะนัะต http://localhost:3000 ะธ ะฝะฐัะฝะธัะต ัะฐะฑะพัั!** ๐

