(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{742:(e,t,s)=>{Promise.resolve().then(s.bind(s,4223))},1169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1172:(e,t,s)=>{"use strict";s.d(t,{AJ:()=>a,Dq:()=>c,MT:()=>n,OK:()=>i,Xz:()=>l,sk:()=>r});let a=e=>{let t=new Map;return e.forEach(e=>{let s=t.get(e.industry)||{count:0,totalRevenue:0,totalEmployees:0};t.set(e.industry,{count:s.count+1,totalRevenue:s.totalRevenue+e.revenue,totalEmployees:s.totalEmployees+e.employees})}),Array.from(t.entries()).map(e=>{let[t,s]=e;return{industry:t,count:s.count,totalRevenue:s.totalRevenue,averageEmployees:Math.round(s.totalEmployees/s.count)}})},r=e=>{let t=new Map;return e.forEach(e=>{let s=t.get(e.region)||{count:0,totalRevenue:0,totalEmployees:0};t.set(e.region,{count:s.count+1,totalRevenue:s.totalRevenue+e.revenue,totalEmployees:s.totalEmployees+e.employees})}),Array.from(t.entries()).map(e=>{let[t,s]=e;return{region:t,count:s.count,totalRevenue:s.totalRevenue,averageEmployees:Math.round(s.totalEmployees/s.count)}})},n=e=>{let t=0,s=[];return e.forEach((e,a)=>{var r;let n=!0,l=[];e.name&&0!==e.name.trim().length||(l.push("Отсутствует название"),n=!1),(null==(r=e.contactInfo)?void 0:r.address)&&0!==e.contactInfo.address.trim().length||(l.push("Отсутствует адрес"),n=!1),e.employees<0&&(l.push("Некорректное количество сотрудников"),n=!1),e.revenue<0&&(l.push("Некорректная выручка"),n=!1),n?t++:s.push("Запись ".concat(a+1,": ").concat(l.join(", ")))}),{totalRecords:e.length,validRecords:t,invalidRecords:e.length-t,validationErrors:s}},l=(e,t)=>e.filter(e=>{if(t.dateRange){let s=new Date(e.registrationDate);if(s<t.dateRange.from||s>t.dateRange.to)return!1}return(!t.industries||!(t.industries.length>0)||!!t.industries.includes(e.industry))&&(!t.regions||!(t.regions.length>0)||!!t.regions.includes(e.region))&&(!t.employeeRange||!(e.employees<t.employeeRange.min)&&!(e.employees>t.employeeRange.max))&&(!t.revenueRange||!(e.revenue<t.revenueRange.min)&&!(e.revenue>t.revenueRange.max))}),i=e=>{let t=new Map;return e.forEach(e=>{let s=new Date(e.registrationDate),a="".concat(s.getFullYear(),"-").concat(String(s.getMonth()+1).padStart(2,"0")),r=t.get(a)||{count:0,revenue:0};t.set(a,{count:r.count+1,revenue:r.revenue+e.revenue})}),Array.from(t.entries()).sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)}).map(e=>{let[t,s]=e;return{month:t,count:s.count,revenue:s.revenue}})},c=e=>{let t=e.reduce((e,t)=>e+t.revenue,0),s=e.reduce((e,t)=>e+t.employees,0),a=e.reduce((e,t)=>e+t.taxesPaid,0),r=e.filter(e=>"active"===e.status).length,n=e.filter(e=>"inactive"===e.status).length,l=e.filter(e=>"suspended"===e.status).length;return{totalEnterprises:e.length,totalRevenue:t,totalEmployees:s,totalTaxes:a,averageRevenue:e.length>0?t/e.length:0,averageEmployees:e.length>0?s/e.length:0,statusDistribution:{active:r,inactive:n,suspended:l}}}},2383:()=>{},3686:()=>{},4223:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),r=s(2115),n=s(1786),l=s(9408),i=s(1524),c=s(1169),o=s(6132);let d=(0,s(1847).A)("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]);var m=s(2619),u=s.n(m),h=s(4951),x=s(1172);function g(){let[e,t]=(0,r.useState)([]),[s,m]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{t((0,h.Az)(500)),m(!1)},[]),s)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg text-gray-600",children:"Загрузка данных..."})});let g=(0,x.Dq)(e),p=(0,x.AJ)(e),v=(0,x.sk)(e),y=(0,x.MT)(e),j=Math.round(y.validRecords/y.totalRecords*100),f=p.sort((e,t)=>t.count-e.count).slice(0,5),N=v.sort((e,t)=>t.count-e.count).slice(0,5);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Система анализа данных предприятий Москвы"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Обзор промышленных предприятий и ключевые показатели"})]}),(0,a.jsxs)(u(),{href:"/upload",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Загрузить данные"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Всего предприятий"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(0,h.ZV)(g.totalEnterprises)})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg",children:(0,a.jsx)(l.A,{className:"w-6 h-6 text-blue-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("span",{className:"text-green-600 text-sm font-medium",children:[g.statusDistribution.active," активных"]})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Общая выручка"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(0,h.vv)(g.totalRevenue)})]}),(0,a.jsx)("div",{className:"p-3 bg-green-50 rounded-lg",children:(0,a.jsx)(i.A,{className:"w-6 h-6 text-green-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("span",{className:"text-gray-600 text-sm",children:["Ср: ",(0,h.vv)(g.averageRevenue)]})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Всего сотрудников"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(0,h.ZV)(g.totalEmployees)})]}),(0,a.jsx)("div",{className:"p-3 bg-purple-50 rounded-lg",children:(0,a.jsx)(c.A,{className:"w-6 h-6 text-purple-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("span",{className:"text-gray-600 text-sm",children:["Ср: ",(0,h.ZV)(Math.round(g.averageEmployees))]})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Качество данных"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[j,"%"]})]}),(0,a.jsx)("div",{className:"p-3 bg-yellow-50 rounded-lg",children:(0,a.jsx)(o.A,{className:"w-6 h-6 text-yellow-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("span",{className:"text-gray-600 text-sm",children:[y.validRecords," из ",y.totalRecords]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Топ отрасли"}),(0,a.jsx)(u(),{href:"/analytics",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Подробнее"})]}),(0,a.jsx)("div",{className:"space-y-4",children:f.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 font-semibold text-sm",children:t+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.industry}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.count," предприятий"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:(0,h.vv)(e.totalRevenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Ср: ",e.averageEmployees," сотр."]})]})]},e.industry))})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Топ регионы"}),(0,a.jsx)(u(),{href:"/analytics",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Подробнее"})]}),(0,a.jsx)("div",{className:"space-y-4",children:N.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 font-semibold text-sm",children:t+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.region}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.count," предприятий"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:(0,h.vv)(e.totalRevenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Ср: ",e.averageEmployees," сотр."]})]})]},e.region))})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Быстрые действия"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(u(),{href:"/upload",className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(n.A,{className:"w-8 h-8 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Загрузить данные"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Добавить новые данные предприятий"})]})]}),(0,a.jsxs)(u(),{href:"/analytics",className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors",children:[(0,a.jsx)(d,{className:"w-8 h-8 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Аналитика"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Подробный анализ данных"})]})]}),(0,a.jsxs)(u(),{href:"/reports",className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-colors",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 text-purple-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Отчёты"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Сгенерировать отчёт"})]})]})]})]})]})}},4951:(e,t,s)=>{"use strict";s.d(t,{Az:()=>h,Bp:()=>i,CO:()=>o,LW:()=>d,N9:()=>l,ZV:()=>m,vv:()=>u});var a=s(4246),r=s(9349),n=s.n(r);let l=["Центральный","Северный","Северо-Восточный","Восточный","Юго-Восточный","Южный","Юго-Западный","Западный","Северо-Западный","Новомосковский","Троицкий"],i=["Машиностроение","Пищевая промышленность","Химическая промышленность","Текстильная промышленность","Металлургия","Электроника","Строительные материалы","Фармацевтика","Автомобилестроение","Полиграфия","Другое"],c=e=>{let t=[];e.name&&"string"==typeof e.name||t.push("Некорректное название предприятия"),e.industry&&i.includes(e.industry)||t.push("Некорректная отрасль"),e.region&&l.includes(e.region)||t.push("Некорректный регион"),(!e.employees||0>Number(e.employees))&&t.push("Некорректное количество сотрудников"),(!e.revenue||0>Number(e.revenue))&&t.push("Некорректная выручка");let s=e.contactInfo;return(null==s?void 0:s.address)||t.push("Отсутствует адрес"),{isValid:0===t.length,errors:t}},o=e=>new Promise(t=>{n().parse(e,{header:!0,complete:e=>{let s=[],a=[],r=0;e.data.forEach((e,t)=>{let n=c(e);if(n.isValid){let t={id:crypto.randomUUID(),name:String(e.name),industry:String(e.industry),region:String(e.region),employees:parseInt(String(e.employees))||0,revenue:parseFloat(String(e.revenue))||0,taxesPaid:parseFloat(String(e.taxesPaid))||0,registrationDate:new Date(String(e.registrationDate)||Date.now()),lastUpdated:new Date,status:e.status||"active",contactInfo:{address:String(e.address),phone:String(e.phone||""),email:String(e.email||"")}};s.push(t)}else r++,a.push("Строка ".concat(t+1,": ").concat(n.errors.join(", ")))}),t({success:!0,message:"Обработано ".concat(s.length," записей из ").concat(e.data.length),processedCount:s.length,errorCount:r,errors:a,data:s})},error:e=>{t({success:!1,message:"Ошибка парсинга CSV: ".concat(e.message),processedCount:0,errorCount:1,errors:[e.message]})}})}),d=e=>new Promise(t=>{let s=new FileReader;s.onload=e=>{try{var s;let r=null==(s=e.target)?void 0:s.result,n=a.LF(r,{type:"binary"}),l=n.SheetNames[0],i=n.Sheets[l],o=a.Wp.sheet_to_json(i),d=[],m=[],u=0;o.forEach((e,t)=>{let s=c(e);if(s.isValid){let t={id:crypto.randomUUID(),name:String(e.name),industry:String(e.industry),region:String(e.region),employees:parseInt(String(e.employees))||0,revenue:parseFloat(String(e.revenue))||0,taxesPaid:parseFloat(String(e.taxesPaid))||0,registrationDate:new Date(String(e.registrationDate)||Date.now()),lastUpdated:new Date,status:e.status||"active",contactInfo:{address:String(e.address),phone:String(e.phone||""),email:String(e.email||"")}};d.push(t)}else u++,m.push("Строка ".concat(t+1,": ").concat(s.errors.join(", ")))}),t({success:!0,message:"Обработано ".concat(d.length," записей из ").concat(o.length),processedCount:d.length,errorCount:u,errors:m,data:d})}catch(e){t({success:!1,message:"Ошибка парсинга Excel: ".concat(e.message),processedCount:0,errorCount:1,errors:[e.message]})}},s.readAsBinaryString(e)}),m=e=>new Intl.NumberFormat("ru-RU").format(e),u=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=[];for(let s=0;s<e;s++){let e={id:crypto.randomUUID(),name:"Предприятие ".concat(s+1),industry:i[Math.floor(Math.random()*i.length)],region:l[Math.floor(Math.random()*l.length)],employees:Math.floor(1e3*Math.random())+10,revenue:Math.floor(1e8*Math.random())+1e6,taxesPaid:Math.floor(1e7*Math.random())+1e5,registrationDate:new Date(Date.now()-365*Math.random()*432e6),lastUpdated:new Date,status:Math.random()>.1?"active":Math.random()>.5?"inactive":"suspended",contactInfo:{address:"Москва, улица ".concat(s+1,", дом ").concat(Math.floor(100*Math.random())+1),phone:"+7-495-".concat(Math.floor(900*Math.random())+100,"-").concat(Math.floor(90*Math.random())+10,"-").concat(Math.floor(90*Math.random())+10),email:"contact".concat(s+1,"@enterprise.ru")}};t.push(e)}return t}},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{e.O(0,[524,547,204,441,255,358],()=>e(e.s=742)),_N_E=e.O()}]);